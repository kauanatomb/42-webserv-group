# TEST: return location overrides error_pages while still skipping root/index
# EXPECT:
# - Location /old Return: 301 /new
# - Error Pages merged with location precedence:
#   404 -> /errors/l404.html (override)
#   500 -> /errors/s500.html (inherited)

server {
  listen 8080;
  root /srv/site;
  index a.html;

  error_page 404 /errors/s404.html;
  error_page 500 /errors/s500.html;

  location /old {
    return 301 /new;
    error_page 404 /errors/l404.html;
  }
}