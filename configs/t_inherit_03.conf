# TEST: return disables root/index inheritance
# PURPOSE:
# - Server defines root/index.
# - Location /old defines a return rule.
# - Resolver should NOT inherit root/index into /old when return is set.
# - But other values (like client_max_body_size, error_pages) may still apply.
#
# EXPECT:
# - Location /old prints: Return: 301 /new
# - Location /old does NOT print Root/Index (or they remain unset)
# - Location /old still has client_max_body_size inherited/default


server {
  listen 8080;
  root /srv/site;
  index a.html;

  location /old {
    return 301 /new;
  }
}